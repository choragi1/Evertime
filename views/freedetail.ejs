<!doctype html>
<html>
  <head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS,JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

<!-- CSS -->
<link rel="stylesheet" href="/public/css/total.css" >

<!-- JQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

    <title><%=post.post_title %></title>
  </head>
  <body>
    <%- include('login.ejs')  %>
    <%- include('nav.ejs')  %>
     

  <div class="container">
    <!-- mt-4,pt-4 margintop,paddingtop을 숫자에 비례해서 준다(1~5) -->
     <div class="card w-100 mt-4 text-left">
      <div class="card-body">
        <h4 class="card-title"><%=post.post_title %></h4>
        <hr>
        <p class="card-text">작성자 : <%=post.writer %></p>
        <p class="card-text">작성일 : <%=post.date %></p>
        <hr>
        <p class="card-text"><%=post.post_content %></p>
        <hr>
        
        <form style="display: inline-block;" method="POST" action="/free/edit">
          <input type="hidden" name="_id" value="<%= post._id %>">
          <input type="hidden" name="writer" value="<%= post.writer %>">
          <input type="submit" class="btn btn-outline-success" value="수정">
        </form>

        <form style="display: inline-block;" method="POST" action="/free/del">
          <input type="hidden" name="_id" value="<%= post._id %>">
          <input type="hidden" name="writer" value="<%= post.writer %>">
          <input type="submit" class="btn btn-outline-danger" value="삭제">
        </form>
        
        <button style="display: inline-block;" class="btn btn-outline-primary" id="like" data-id="<%= post._id%>">추천</button>
      </div>
      <form class="m-4" method="POST" action="/detail/free/regcomm">
        
        <h5><b>댓글</b></h5>
        <input type="text" style="width:500px;height:100px;" name="comment">
        <input type="hidden" name="postid" value="<%=post._id%>">
        <input type="submit" class="comment btn btn-outline-primary" data-id="<%= post._id%>" value="등록">

        
        <table class="table mt-4">
          <thead>
            <tr style="background-color: rgb(233, 232, 232);">
              <th scope="col" style="text-align: center;">작성자</th>
              <th scope="col" style="text-align: center;">댓글</th>
              <th scope="col" style="text-align: center;">작성일</th>
            </tr>
          </thead>
          <tbody>
            <% for(var i=0;i<post2.length;i++){ %>
            <tr>
               <td width="8%" class="p-2" align="center"><%= post2[i].writer %></td>
               <td width="62%" class="p-2" align="center"><%= post2[i].comment %></td>
               <td width="25%" class="p-2" align="center">
                <%= post2[i].date %>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-fill" id="com-edlt" viewBox="0 0 16 16"><path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" id="com-del" viewBox="0 0 16 16"><path d="M1.293 1.293a1 1 0 0 1 1.414 0L8 6.586l5.293-5.293a1 1 0 1 1 1.414 1.414L9.414 8l5.293 5.293a1 1 0 0 1-1.414 1.414L8 9.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L6.586 8 1.293 2.707a1 1 0 0 1 0-1.414z"/></svg>
              </td>
            </tr>
            <% } %>
          </tbody>
        </table>
      </form>
    </div>    
  </div>


 <script>



   $('#like').click(function(e){
    var postno = e.target.dataset.id;
    $.ajax({
      method : 'POST',
      url : '/detail/free/like',
      data : {_id : postno}
    }).done(function(data, textStatus, xhr){
            alert(data);
          })  
        })



 </script>

  


  <!-- 로그인 버튼 클릭 시 애니메이션 -->
  <%- include('loginani.ejs') %>



  </body>
</html>